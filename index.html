<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Premium AI Coding Assistant</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <style>
    :root {
      --bg-main: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      --text-main: #fff;
      --card-bg: rgba(255, 255, 255, 0.1);
      --btn-gradient: linear-gradient(45deg, #ff6b6b, #ffa500);
      --btn-shadow: rgba(255, 107, 107, 0.4);
    }
    body.dark {
      --bg-main: linear-gradient(135deg, #fff 0%, #d9d9d9 50%, #bfbfbf 100%);
      --text-main: #000;
      --card-bg: rgba(0, 0, 0, 0.1);
      --btn-gradient: linear-gradient(45deg, #0066ff, #00ccff);
      --btn-shadow: rgba(0, 102, 255, 0.3);
    }
    body {
      background: var(--bg-main);
      color: var(--text-main);
      font-family: "Poppins", sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      transition: all 0.4s ease;
    }
    .container {
      background: var(--card-bg);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
      animation: slideIn 1.2s ease-out;
      position: relative;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .btn-premium {
      background: var(--btn-gradient);
      border: none;
      color: white;
      font-weight: 600;
      letter-spacing: 0.5px;
      border-radius: 10px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px var(--btn-shadow);
    }
    .btn-premium:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px var(--btn-shadow);
    }
    textarea,
    pre {
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: var(--text-main);
      border-radius: 10px;
      transition: all 0.3s;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .navbar {
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
    }
    .card {
      background: var(--card-bg);
      border: none;
      border-radius: 15px;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.02);
    }
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: var(--btn-gradient);
      color: #fff;
      border: none;
      padding: 10px 14px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 15px var(--btn-shadow);
    }
    .spinner {
      display: none;
      margin-top: 10px;
    }
    .particle {
      position: absolute;
      width: 5px;
      height: 5px;
      background: #ff6b6b;
      border-radius: 50%;
      animation: float 5s infinite ease-in-out;
    }
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-25px);
      }
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand text-white fw-bold" href="#"><i class="fas fa-code"></i> Premium AI Coder</a>
      <div class="navbar-nav ms-auto">
        <a class="nav-link text-white" href="/login">Login</a>
        <a class="nav-link text-white" href="/register">Register</a>
      </div>
    </div>
  </nav>

  <button class="theme-toggle" onclick="toggleTheme()">
    <i class="fas fa-moon"></i>
  </button>

  <div class="container mt-5">
    <h1 class="text-center mb-3 fw-bold"><i class="fas fa-robot"></i> AI Coding Assistant</h1>
    <p class="text-center mb-5">Generate, Fix, Review, dan Optimize kode kamu pakai AI premium ðŸš€</p>

    <div class="row">
      <div class="col-md-6">
        <div class="card p-4 mb-4">
          <h4><i class="fas fa-magic"></i> Generate Kode</h4>
          <select id="lang" class="form-select mb-3">
            <option value="python">Python</option>
            <option value="javascript">JavaScript</option>
            <option value="java">Java</option>
            <option value="php">PHP</option>
            <option value="c++">C++</option>
          </select>
          <textarea id="prompt" class="form-control mb-3" rows="4" placeholder="Contoh: Buat fungsi sorting array..."></textarea>
          <button class="btn btn-premium w-100" onclick="generateCode()">Generate</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Generating...</div>
          <pre id="generated-code" class="mt-3 p-3 rounded"></pre>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card p-4 mb-4">
          <h4><i class="fas fa-wrench"></i> Fix Kode</h4>
          <textarea id="code-input" class="form-control mb-3" rows="4" placeholder="Kode yang error di sini..."></textarea>
          <textarea id="error-input" class="form-control mb-3" rows="2" placeholder="Tulis errornya..."></textarea>
          <button class="btn btn-premium w-100" onclick="fixCode()">Fix</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Fixing...</div>
          <pre id="fixed-code" class="mt-3 p-3 rounded"></pre>
        </div>

        <div class="card p-4 mb-4">
          <h4><i class="fas fa-search"></i> Review Kode</h4>
          <textarea id="review-input" class="form-control mb-3" rows="4" placeholder="Kode yang mau direview..."></textarea>
          <button class="btn btn-premium w-100" onclick="reviewCode()">Review</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Reviewing...</div>
          <pre id="review-output" class="mt-3 p-3 rounded"></pre>
        </div>

        <div class="card p-4">
          <h4><i class="fas fa-rocket"></i> Optimize Kode</h4>
          <textarea id="optimize-input" class="form-control mb-3" rows="4" placeholder="Kode yang mau dioptimasi..."></textarea>
          <button class="btn btn-premium w-100" onclick="optimizeCode()">Optimize</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Optimizing...</div>
          <pre id="optimized-output" class="mt-3 p-3 rounded"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Particles -->
  <div class="particle" style="top: 20%; left: 10%;"></div>
  <div class="particle" style="top: 60%; left: 80%;"></div>
  <div class="particle" style="top: 80%; left: 40%;"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const toggleTheme = () => {
      document.body.classList.toggle("dark");
      const icon = document.querySelector(".theme-toggle i");
      icon.classList.toggle("fa-moon");
      icon.classList.toggle("fa-sun");
    };

    const showSpinner = (el) => el.style.display = "block";
    const hideSpinner = (el) => el.style.display = "none";
    const scrollToOutput = (id) => document.getElementById(id).scrollIntoView({ behavior: "smooth", block: "center" });

    async function fetchAI(endpoint, body, outputId, spinnerIndex) {
      const spinner = document.getElementsByClassName("spinner")[spinnerIndex];
      showSpinner(spinner);
      const res = await fetch(endpoint, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body),
      });
      const data = await res.json();
      hideSpinner(spinner);
      const el = document.getElementById(outputId);
      el.textContent = data.code || data.fixed_code || data.review || data.optimized_code || data.error;
      scrollToOutput(outputId);
    }

    const generateCode = () => fetchAI("/generate_code", { prompt: prompt.value, lang: lang.value }, "generated-code", 0);
    const fixCode = () => fetchAI("/fix_code", { code: codeInput.value, error: errorInput.value }, "fixed-code", 1);
    const reviewCode = () => fetchAI("/review_code", { code: reviewInput.value }, "review-output", 2);
    const optimizeCode = () => fetchAI("/optimize_code", { code: optimizeInput.value }, "optimized-output", 3);

    // Rename DOM elements for cleaner ref
    const prompt = document.getElementById("prompt");
    const lang = document.getElementById("lang");
    const codeInput = document.getElementById("code-input");
    const errorInput = document.getElementById("error-input");
    const reviewInput = document.getElementById("review-input");
    const optimizeInput = document.getElementById("optimize-input");
  </script>
</body>
</html><!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Premium AI Coding Assistant</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <style>
    :root {
      --bg-main: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      --text-main: #fff;
      --card-bg: rgba(255, 255, 255, 0.1);
      --btn-gradient: linear-gradient(45deg, #ff6b6b, #ffa500);
      --btn-shadow: rgba(255, 107, 107, 0.4);
    }
    body.dark {
      --bg-main: linear-gradient(135deg, #fff 0%, #d9d9d9 50%, #bfbfbf 100%);
      --text-main: #000;
      --card-bg: rgba(0, 0, 0, 0.1);
      --btn-gradient: linear-gradient(45deg, #0066ff, #00ccff);
      --btn-shadow: rgba(0, 102, 255, 0.3);
    }
    body {
      background: var(--bg-main);
      color: var(--text-main);
      font-family: "Poppins", sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      transition: all 0.4s ease;
    }
    .container {
      background: var(--card-bg);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
      animation: slideIn 1.2s ease-out;
      position: relative;
    }
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .btn-premium {
      background: var(--btn-gradient);
      border: none;
      color: white;
      font-weight: 600;
      letter-spacing: 0.5px;
      border-radius: 10px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px var(--btn-shadow);
    }
    .btn-premium:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px var(--btn-shadow);
    }
    textarea,
    pre {
      background: rgba(255, 255, 255, 0.15);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: var(--text-main);
      border-radius: 10px;
      transition: all 0.3s;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .navbar {
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
    }
    .card {
      background: var(--card-bg);
      border: none;
      border-radius: 15px;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.02);
    }
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: var(--btn-gradient);
      color: #fff;
      border: none;
      padding: 10px 14px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 4px 15px var(--btn-shadow);
    }
    .spinner {
      display: none;
      margin-top: 10px;
    }
    .particle {
      position: absolute;
      width: 5px;
      height: 5px;
      background: #ff6b6b;
      border-radius: 50%;
      animation: float 5s infinite ease-in-out;
    }
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-25px);
      }
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand text-white fw-bold" href="#"><i class="fas fa-code"></i> Premium AI Coder</a>
      <div class="navbar-nav ms-auto">
        <a class="nav-link text-white" href="/login">Login</a>
        <a class="nav-link text-white" href="/register">Register</a>
      </div>
    </div>
  </nav>

  <button class="theme-toggle" onclick="toggleTheme()">
    <i class="fas fa-moon"></i>
  </button>

  <div class="container mt-5">
    <h1 class="text-center mb-3 fw-bold"><i class="fas fa-robot"></i> AI Coding Assistant</h1>
    <p class="text-center mb-5">Generate, Fix, Review, dan Optimize kode kamu pakai AI premium ðŸš€</p>

    <div class="row">
      <div class="col-md-6">
        <div class="card p-4 mb-4">
          <h4><i class="fas fa-magic"></i> Generate Kode</h4>
          <select id="lang" class="form-select mb-3">
            <option value="python">Python</option>
            <option value="javascript">JavaScript</option>
            <option value="java">Java</option>
            <option value="php">PHP</option>
            <option value="c++">C++</option>
          </select>
          <textarea id="prompt" class="form-control mb-3" rows="4" placeholder="Contoh: Buat fungsi sorting array..."></textarea>
          <button class="btn btn-premium w-100" onclick="generateCode()">Generate</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Generating...</div>
          <pre id="generated-code" class="mt-3 p-3 rounded"></pre>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card p-4 mb-4">
          <h4><i class="fas fa-wrench"></i> Fix Kode</h4>
          <textarea id="code-input" class="form-control mb-3" rows="4" placeholder="Kode yang error di sini..."></textarea>
          <textarea id="error-input" class="form-control mb-3" rows="2" placeholder="Tulis errornya..."></textarea>
          <button class="btn btn-premium w-100" onclick="fixCode()">Fix</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Fixing...</div>
          <pre id="fixed-code" class="mt-3 p-3 rounded"></pre>
        </div>

        <div class="card p-4 mb-4">
          <h4><i class="fas fa-search"></i> Review Kode</h4>
          <textarea id="review-input" class="form-control mb-3" rows="4" placeholder="Kode yang mau direview..."></textarea>
          <button class="btn btn-premium w-100" onclick="reviewCode()">Review</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Reviewing...</div>
          <pre id="review-output" class="mt-3 p-3 rounded"></pre>
        </div>

        <div class="card p-4">
          <h4><i class="fas fa-rocket"></i> Optimize Kode</h4>
          <textarea id="optimize-input" class="form-control mb-3" rows="4" placeholder="Kode yang mau dioptimasi..."></textarea>
          <button class="btn btn-premium w-100" onclick="optimizeCode()">Optimize</button>
          <div class="spinner text-center"><i class="fas fa-spinner fa-spin"></i> Optimizing...</div>
          <pre id="optimized-output" class="mt-3 p-3 rounded"></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- Particles -->
  <div class="particle" style="top: 20%; left: 10%;"></div>
  <div class="particle" style="top: 60%; left: 80%;"></div>
  <div class="particle" style="top: 80%; left: 40%;"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const toggleTheme = () => {
      document.body.classList.toggle("dark");
      const icon = document.querySelector(".theme-toggle i");
      icon.classList.toggle("fa-moon");
      icon.classList.toggle("fa-sun");
    };

    const showSpinner = (el) => el.style.display = "block";
    const hideSpinner = (el) => el.style.display = "none";
    const scrollToOutput = (id) => document.getElementById(id).scrollIntoView({ behavior: "smooth", block: "center" });

    async function fetchAI(endpoint, body, outputId, spinnerIndex) {
      const spinner = document.getElementsByClassName("spinner")[spinnerIndex];
      showSpinner(spinner);
      const res = await fetch(endpoint, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(body),
      });
      const data = await res.json();
      hideSpinner(spinner);
      const el = document.getElementById(outputId);
      el.textContent = data.code || data.fixed_code || data.review || data.optimized_code || data.error;
      scrollToOutput(outputId);
    }

    const generateCode = () => fetchAI("/generate_code", { prompt: prompt.value, lang: lang.value }, "generated-code", 0);
    const fixCode = () => fetchAI("/fix_code", { code: codeInput.value, error: errorInput.value }, "fixed-code", 1);
    const reviewCode = () => fetchAI("/review_code", { code: reviewInput.value }, "review-output", 2);
    const optimizeCode = () => fetchAI("/optimize_code", { code: optimizeInput.value }, "optimized-output", 3);

    // Rename DOM elements for cleaner ref
    const prompt = document.getElementById("prompt");
    const lang = document.getElementById("lang");
    const codeInput = document.getElementById("code-input");
    const errorInput = document.getElementById("error-input");
    const reviewInput = document.getElementById("review-input");
    const optimizeInput = document.getElementById("optimize-input");
  </script>
</body>
</html>

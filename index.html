<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium AI Coding Assistant</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: white;
            font-family: 'Roboto', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            animation: slideIn 1.5s ease-out;
            position: relative;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ff6b6b;
            border-radius: 50%;
            animation: float 6s infinite ease-in-out;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        .btn-premium {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            border: none;
            color: white;
            font-weight: bold;
            transition: all 0.4s;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        .btn-premium:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.6);
        }
        textarea, pre {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 10px;
        }
        .navbar {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }
        .card {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 15px;
        }
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#"><i class="fas fa-code"></i> Premium AI Coder</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/login">Login</a>
                <a class="nav-link" href="/register">Register</a>
            </div>
        </div>
    </nav>
    <button class="btn btn-light theme-toggle" onclick="toggleTheme()"><i class="fas fa-moon"></i></button>
    <div class="container mt-5">
        <h1 class="text-center mb-4"><i class="fas fa-robot"></i> AI Coding Assistant Premium</h1>
        <p class="text-center">Serba bisa: Generate, Fix, Review, Optimize kode dalam berbagai bahasa!</p>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card p-4 mb-4">
                    <h3><i class="fas fa-magic"></i> Generate Kode</h3>
                    <select id="lang" class="form-select mb-3">
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                        <option value="java">Java</option>
                    </select>
                    <textarea id="prompt" class="form-control mb-3" rows="5" placeholder="Prompt, e.g., 'Buat fungsi untuk sorting array'"></textarea>
                    <button class="btn btn-premium w-100" onclick="generateCode()">Generate</button>
                    <pre id="generated-code" class="mt-3 p-3 rounded"></pre>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card p-4 mb-4">
                    <h3><i class="fas fa-wrench"></i> Fix Kode</h3>
                    <textarea id="code-input" class="form-control mb-3" rows="5" placeholder="Kode bermasalah"></textarea>
                    <textarea id="error-input" class="form-control mb-3" rows="2" placeholder="Error description"></textarea>
                    <button class="btn btn-premium w-100" onclick="fixCode()">Fix</button>
                    <pre id="fixed-code" class="mt-3 p-3 rounded"></pre>
                </div>
                <div class="card p-4 mb-4">
                    <h3><i class="fas fa-search"></i> Review Kode</h3>
                    <textarea id="review-input" class="form-control mb-3" rows="5" placeholder="Kode untuk review"></textarea>
                    <button class="btn btn-premium w-100" onclick="reviewCode()">Review</button>
                    <pre id="review-output" class="mt-3 p-3 rounded"></pre>
                </div>
                <div class="card p-4">
                    <h3><i class="fas fa-rocket"></i> Optimize Kode</h3>
                    <textarea id="optimize-input" class="form-control mb-3" rows="5" placeholder="Kode untuk optimize"></textarea>
                    <button class="btn btn-premium w-100" onclick="optimizeCode()">Optimize</button>
                    <pre id="optimized-output" class="mt-3 p-3 rounded"></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- Particles -->
    <div class="particle" style="top: 20%; left: 10%;"></div>
    <div class="particle" style="top: 50%; left: 80%;"></div>
    <div class="particle" style="top: 80%; left: 50%;"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        async function generateCode() {
            const prompt = document.getElementById('prompt').value;
            const lang = document.getElementById('lang').value;
            const response = await fetch('/generate_code', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt, lang })
            });
            const data = await response.json();
            document.getElementById('generated-code').textContent = data.code || data.error;
        }

        async function fixCode() {
            const code = document.getElementById('code-input').value;
            const error = document.getElementById('error-input').value;
            const response = await fetch('/fix_code', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code, error })
            });
            const data = await response.json();
            document.getElementById('fixed-code').textContent = data.fixed_code || data.error;
        }

        async function reviewCode() {
            const code = document.getElementById('review-input').value;
            const response = await fetch('/review_code', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code })
            });
            const data = await response.json();
            document.getElementById('review-output').textContent = data.review || data.error;
        }

        async function optimizeCode() {
            const code = document.getElementById('optimize-input').value;
            const response = await fetch('/optimize_code', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ code })
            });
            const data = await response.json();
            document.getElementById('optimized-output').textContent = data.optimized_code || data.error;
        }

        function toggleTheme() {
            document.body.classList.toggle('dark');
            // Tambah logika tema gelap
        }
    </script>
</body>
</html>
